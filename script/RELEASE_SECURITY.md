# å‘å¸ƒè„šæœ¬å®‰å…¨æ€§å¢å¼º

## ğŸ”’ æ–°å¢çš„å®‰å…¨é™åˆ¶

### 1. Master åˆ†æ”¯å¼ºåˆ¶æ£€æŸ¥
- âœ… å‘å¸ƒæ“ä½œ**å¿…é¡»**åœ¨ `master` åˆ†æ”¯æ‰§è¡Œ
- âœ… è‡ªåŠ¨æ£€æµ‹å½“å‰åˆ†æ”¯
- âœ… é master åˆ†æ”¯ä¼šæŠ¥é”™å¹¶æç¤ºåˆ‡æ¢

```bash
# é”™è¯¯ç¤ºä¾‹ï¼šåœ¨å…¶ä»–åˆ†æ”¯æ‰§è¡Œ
$ git checkout develop
$ node script/release.mjs
âŒ é”™è¯¯ï¼šå‘å¸ƒå¿…é¡»åœ¨ master åˆ†æ”¯è¿›è¡Œ
   å½“å‰åˆ†æ”¯ï¼šdevelop
   è¯·å…ˆåˆ‡æ¢åˆ° master åˆ†æ”¯ï¼šgit checkout master
```

### 2. è‡ªåŠ¨åŒæ­¥æœ€æ–°ä»£ç 
- âœ… æ‰§è¡Œå‘å¸ƒå‰è‡ªåŠ¨ `git pull origin master`
- âœ… ç¡®ä¿åŸºäºæœ€æ–°ä»£ç å‘å¸ƒ
- âœ… é¿å…ç‰ˆæœ¬å†²çª

### 3. æ™ºèƒ½ Git Commit è·å–

#### è·å–é€»è¾‘ä¼˜å…ˆçº§ï¼š

| åœºæ™¯ | è·å–æ–¹å¼ | ç¤ºä¾‹ |
|------|---------|------|
| **æ–°ç‰ˆæœ¬å‘å¸ƒ** | æœ€æ–° tag â†’ HEAD | `v0.0.1..HEAD` |
| **å·²æœ‰å¤šä¸ªç‰ˆæœ¬** | æœ€è¿‘ä¸¤ä¸ª tag ä¹‹é—´ | `v0.0.1..v0.0.2` |
| **é¦–æ¬¡å‘å¸ƒ** | æœ€è¿‘ 15 æ¡æäº¤ | `git log -15` |
| **å¼‚å¸¸æƒ…å†µ** | æœ€è¿‘ 10 æ¡æäº¤ | å¤‡ç”¨æ–¹æ¡ˆ |

#### ç¤ºä¾‹ï¼š

```bash
# åœºæ™¯1ï¼šå‡†å¤‡å‘å¸ƒ v0.0.2ï¼Œå½“å‰æœ€æ–° tag æ˜¯ v0.0.1
è·å– v0.0.1 åˆ° HEAD ä¹‹é—´çš„æäº¤

# åœºæ™¯2ï¼šæŸ¥çœ‹å·²å‘å¸ƒçš„ v0.0.2 ç‰ˆæœ¬ï¼ˆv0.0.1 â†’ v0.0.2ï¼‰
è·å– v0.0.1 åˆ° v0.0.2 ä¹‹é—´çš„æäº¤

# åœºæ™¯3ï¼šé¦–æ¬¡å‘å¸ƒ v0.0.1
é¦–æ¬¡å‘å¸ƒï¼Œè·å–æœ€è¿‘ 15 æ¡æäº¤
```

## ğŸ›¡ï¸ å®‰å…¨æ£€æŸ¥æµç¨‹

```mermaid
graph TD
    A[å¼€å§‹å‘å¸ƒ] --> B{å½“å‰åˆ†æ”¯æ˜¯ master?}
    B -->|å¦| C[âŒ æŠ¥é”™é€€å‡º]
    B -->|æ˜¯| D[âœ“ æ‹‰å–æœ€æ–°ä»£ç ]
    D --> E{æœ‰æœªæäº¤æ›´æ”¹?}
    E -->|æ˜¯| F[âš  è­¦å‘Šæç¤º]
    F --> G{ç»§ç»­å‘å¸ƒ?}
    G -->|å¦| H[å–æ¶ˆå‘å¸ƒ]
    G -->|æ˜¯| I[è·å–æäº¤è®°å½•]
    E -->|å¦| I[è·å–æäº¤è®°å½•]
    I --> J[æ™ºèƒ½åˆ¤æ–­è·å–æ–¹å¼]
    J --> K[ç”Ÿæˆå‘å¸ƒæ—¥å¿—]
```

## ğŸ“ ä½¿ç”¨å»ºè®®

### æ­£ç¡®çš„å‘å¸ƒæµç¨‹ï¼š

```bash
# 1. åˆ‡æ¢åˆ° master åˆ†æ”¯
git checkout master

# 2. ç¡®ä¿ä»£ç æœ€æ–°
git pull origin master

# 3. æ‰§è¡Œå‘å¸ƒè„šæœ¬
node script/release-v2.mjs  # æ–°ç‰ˆï¼ˆç‹¬ç«‹ç‰ˆæœ¬ï¼‰
# æˆ–
node script/release.mjs     # åŸç‰ˆ

# è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
# - éªŒè¯åˆ†æ”¯
# - åŒæ­¥ä»£ç 
# - è·å–ç›¸å…³ commits
# - ç”Ÿæˆå‘å¸ƒè¯´æ˜
# - åˆ›å»ºç‰ˆæœ¬ tag
```

### ç‰ˆæœ¬ Tag å‘½åè§„èŒƒï¼š

| é¡¹ç›®ç±»å‹ | Tag æ ¼å¼ | ç¤ºä¾‹ |
|----------|----------|------|
| åç«¯ | `mindtrip-backend-v{version}` | `mindtrip-backend-v0.0.1` |
| å‰ç«¯ | `mindtrip-frontend-v{version}` | `mindtrip-frontend-v0.0.1` |
| å…¨æ ˆ | `mindtrip-v{version}` | `mindtrip-v0.0.1` |
| åŸç‰ˆ | `v{version}` | `v2.7.0` |

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **åˆ†æ”¯é™åˆ¶**ï¼šåªèƒ½åœ¨ master åˆ†æ”¯å‘å¸ƒï¼Œç¡®ä¿ç”Ÿäº§ä»£ç çš„ä¸€è‡´æ€§
2. **è‡ªåŠ¨åŒæ­¥**ï¼šå‘å¸ƒå‰ä¼šè‡ªåŠ¨æ‹‰å–æœ€æ–°ä»£ç ï¼Œé¿å…å†²çª
3. **æäº¤è·å–**ï¼šæ™ºèƒ½åˆ¤æ–­è·å–æ–¹å¼ï¼Œç¡®ä¿å‘å¸ƒæ—¥å¿—çš„å‡†ç¡®æ€§
4. **ç‰ˆæœ¬é€’å¢**ï¼šæ ¹æ® release typeï¼ˆmajor/minor/patchï¼‰è‡ªåŠ¨è®¡ç®—ä¸‹ä¸€ç‰ˆæœ¬

## ğŸš€ ä¸¤ä¸ªå‘å¸ƒè„šæœ¬çš„åŒºåˆ«

| ç‰¹æ€§ | release.mjsï¼ˆåŸç‰ˆï¼‰ | release-v2.mjsï¼ˆæ–°ç‰ˆï¼‰ |
|------|-------------------|---------------------|
| ç‰ˆæœ¬ç®¡ç† | ä½¿ç”¨ç°æœ‰ç‰ˆæœ¬ä½“ç³» | ç‹¬ç«‹ç‰ˆæœ¬ï¼ˆä»0.0.1å¼€å§‹ï¼‰ |
| Tag æ ¼å¼ | `v{version}` | `mindtrip-{type}-v{version}` |
| ç‰ˆæœ¬æ–‡ä»¶ | package.json | ç‹¬ç«‹çš„ version.properties/json |
| é€‚ç”¨åœºæ™¯ | ä¿æŒå†å²è¿ç»­æ€§ | å…¨æ–°ç‰ˆæœ¬ä½“ç³» |

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å®šæœŸå‘å¸ƒ**ï¼šé¿å…ç§¯ç´¯è¿‡å¤šæäº¤
2. **è¯­ä¹‰åŒ–ç‰ˆæœ¬**ï¼šæ­£ç¡®é€‰æ‹© major/minor/patch
3. **æäº¤è§„èŒƒ**ï¼šä½¿ç”¨è§„èŒƒçš„ commit messageï¼ˆfeat/fix/choreï¼‰
4. **æµ‹è¯•éªŒè¯**ï¼šå‘å¸ƒå‰ç¡®ä¿é€šè¿‡æ‰€æœ‰æµ‹è¯•
5. **åŠæ—¶åŒæ­¥**ï¼šå‘å¸ƒååŠæ—¶é€šçŸ¥å›¢é˜Ÿæˆå‘˜