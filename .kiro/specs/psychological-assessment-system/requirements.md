# 心理测评管理系统需求文档

## 项目概述

本项目旨在为现有教育管理系统增加心理测评管理功能，构建一个完整的学生心理健康评估和管理平台。系统将支持学生端、家长端、教师端和管理端四个角色，实现测评创建、执行、结果分析和档案管理的全流程管理。

第一期将重点实现三个核心功能：学生端和家长端测评参与、测评管理、学生档案管理。第二期将扩展心理咨询管理和危机干预管理功能。

## 需求列表

### 需求1：多端测评参与功能

**用户故事：** 作为学生或家长，我希望能够通过各自的端口参与心理测评，以便及时了解和关注学生的心理健康状况。

#### 验收标准

1. WHEN 学生收到测评任务通知 THEN 系统 SHALL 在学生端显示待完成的测评任务列表
2. WHEN 家长收到测评任务通知 THEN 系统 SHALL 在家长端显示需要协助完成的测评任务
3. WHEN 学生或家长点击测评任务 THEN 系统 SHALL 展示测评问卷界面并支持答题保存
4. WHEN 测评完成提交 THEN 系统 SHALL 自动计算得分并生成初步评估结果
5. IF 测评结果显示高风险 THEN 系统 SHALL 自动触发预警机制并通知相关教师

### 需求2：测评任务创建与管理

**用户故事：** 作为心理教师或年级管理员，我希望能够创建和管理测评任务，以便系统化地开展学生心理健康评估工作。

#### 验收标准

1. WHEN 教师创建测评任务 THEN 系统 SHALL 提供"创建任务 → 选择学生 → 确认信息 → 发布"的四步流程
2. WHEN 创建测评任务 THEN 系统 SHALL 自动生成唯一的任务ID/任务编号用于后续问题排查
3. WHEN 选择测评量表 THEN 系统 SHALL 提供第一期固定的两套问卷选项，一次任务只能选择一个问卷
4. WHEN 选择测评对象 THEN 系统 SHALL 支持按年级批量选择、按班级精确选择和个体学生搜索
5. WHEN 测评任务发布 THEN 系统 SHALL 自动向目标学生发送通知并创建测评链接
6. WHEN 查看测评进度 THEN 系统 SHALL 实时显示"已完成"、"未完成"、"进行中"状态和进度统计

### 需求3：测评结果分析与报告

**用户故事：** 作为教师，我希望能够查看详细的测评结果分析，以便准确了解学生心理状态并制定相应的干预措施。

#### 验收标准

1. WHEN 查看测评批次详情 THEN 系统 SHALL 显示参与统计、风险等级分布和组织结构对比分析
2. WHEN 查看学生个体报告 THEN 系统 SHALL 展示各维度得分、风险评估说明和专业建议内容
3. WHEN 进行历史对比 THEN 系统 SHALL 显示同类型量表的历史测评对比和变化趋势
4. WHEN 发现高风险学生 THEN 系统 SHALL 提供转为预警事件、发起咨询预约等快速处理操作
5. IF 需要导出报告 THEN 系统 SHALL 支持PDF格式的完整测评报告下载

### 需求4：学生档案管理系统

**用户故事：** 作为教师，我希望能够建立和维护完整的学生心理健康档案，以便全面跟踪学生的心理发展状况。

#### 验收标准

1. WHEN 创建学生档案 THEN 系统 SHALL 支持单个手动创建和Excel批量导入两种方式
2. WHEN 录入学生信息 THEN 系统 SHALL 对基本信息、就读信息、联系信息进行实时验证
3. WHEN 录入家长信息 THEN 系统 SHALL 将家长信息与学生信息绑定，作为学生档案的一部分
4. WHEN 查询学生档案 THEN 系统 SHALL 支持姓名学号搜索、年级班级筛选和"已毕业"/"未毕业"学生筛选
5. WHEN 查看学生360°档案 THEN 系统 SHALL 整合显示综合时间线、测评历史、咨询记录和个人信息
6. WHEN 学生毕业 THEN 系统 SHALL 支持整个年级统一毕业归档和特殊心理状态学生的处理

### 需求5：权限管理与数据安全

**用户故事：** 作为系统管理员，我希望能够严格控制不同角色的数据访问权限，以便保护学生隐私和数据安全。

#### 验收标准

1. WHEN 用户首次登录系统 THEN 系统 SHALL 使用统一的默认密码（如：123456）并强制要求修改密码
2. WHEN 用户登录系统 THEN 系统 SHALL 根据用户角色分配相应的功能权限和数据访问范围
3. WHEN 系统管理员访问数据 THEN 系统 SHALL 允许查看所有数据
4. WHEN 年级管理员访问数据 THEN 系统 SHALL 仅显示其所管辖年级的全部师生数据
5. WHEN 班主任访问数据 THEN 系统 SHALL 仅显示自己所带班级的完整学生数据
6. WHEN 心理老师访问数据 THEN 系统 SHALL 根据其被分配管理的班级提供相应数据权限
7. WHEN 任课老师访问系统 THEN 系统 SHALL 主要提供"快速上报"功能，默认几乎无数据查看权限
8. WHEN 进行敏感操作 THEN 系统 SHALL 记录详细的操作审计日志
9. WHEN 导出学生档案 THEN 系统 SHALL 向上级管理员发送通知并记录导出行为
10. IF 学生已毕业 THEN 系统 SHALL 限制相关操作权限但保留原班主任和心理老师的查看权限

### 需求6：通知与提醒机制

**用户故事：** 作为系统用户，我希望能够及时收到相关的通知和提醒，以便不错过重要的测评任务和处理事项。

#### 验收标准

1. WHEN 测评任务发布 THEN 系统 SHALL 通过系统内通知、短信和微信推送向目标用户发送通知
2. WHEN 测评截止前 THEN 系统 SHALL 自动发送提醒通知给未完成的学生
3. WHEN 发现高风险学生 THEN 系统 SHALL 立即通知相关教师和管理员
4. WHEN 有新的咨询预约 THEN 系统 SHALL 向心理教师发送预约通知
5. IF 系统检测到异常行为 THEN 系统 SHALL 触发危机干预流程并通知相关人员

### 需求7：数据统计与分析

**用户故事：** 作为管理员，我希望能够查看全面的数据统计和分析报告，以便了解整体的心理健康状况和工作效果。

#### 验收标准

1. WHEN 查看统计数据 THEN 系统 SHALL 提供年级对比、班级对比和人口学分布统计
2. WHEN 进行趋势分析 THEN 系统 SHALL 显示每日测评完成情况和各维度得分分布
3. WHEN 生成分析报告 THEN 系统 SHALL 提供关键发现、风险提示和对比分析内容
4. WHEN 识别异常情况 THEN 系统 SHALL 自动标识完成率或风险率异常的组织单位
5. IF 需要历史对比 THEN 系统 SHALL 支持与历史测评数据的变化对比分析

### 需求8：组织架构管理

**用户故事：** 作为系统管理员，我希望能够管理学校的组织架构，以便支持细化的权限控制和数据管理。

#### 验收标准

1. WHEN 管理员设置组织架构 THEN 系统 SHALL 支持学校 → 学部 → 年级 → 班级的树状结构
2. WHEN 管理班级信息 THEN 系统 SHALL 将班级映射为部门概念进行权限设计
3. WHEN 分配班主任 THEN 系统 SHALL 支持为每个班级设置班主任并自动分配数据权限
4. WHEN 分配心理老师 THEN 系统 SHALL 支持心理老师管理多个班级并获得相应数据权限
5. WHEN 进行组织架构变更 THEN 系统 SHALL 自动更新相关用户的数据访问权限

### 需求9：学生档案时间线

**用户故事：** 作为教师，我希望能够查看学生的完整时间线记录，以便全面了解学生的心理发展历程。

#### 验收标准

1. WHEN 查看学生详情页 THEN 系统 SHALL 显示综合时间线记录所有关键业务事件
2. WHEN 记录测评完成 THEN 系统 SHALL 自动在时间线中添加测评记录
3. WHEN 记录咨询活动 THEN 系统 SHALL 自动在时间线中添加咨询记录
4. WHEN 记录状态变更 THEN 系统 SHALL 自动在时间线中添加心理状态变更记录
5. WHEN 记录快速上报 THEN 系统 SHALL 自动在时间线中添加教师上报事件
6. WHEN 尝试删除时间线记录 THEN 系统 SHALL 禁止删除操作，确保数据完整性

### 需求10：快速上报功能

**用户故事：** 作为任课老师，我希望能够快速上报学生的异常情况，以便及时关注学生的心理健康状况。

#### 验收标准

1. WHEN 任课老师登录系统 THEN 系统 SHALL 主要提供快速上报功能入口
2. WHEN 进行快速上报 THEN 系统 SHALL 支持选择学生、描述情况、设置紧急程度
3. WHEN 提交上报信息 THEN 系统 SHALL 自动通知相关心理老师和班主任
4. WHEN 上报完成 THEN 系统 SHALL 在学生时间线中自动记录上报事件
5. WHEN 查看上报历史 THEN 系统 SHALL 允许任课老师查看自己的上报记录

### 需求11：系统集成与扩展

**用户故事：** 作为技术管理员，我希望新的测评系统能够与现有教育管理系统无缝集成，以便充分利用现有的用户和数据资源。

#### 验收标准

1. WHEN 系统部署 THEN 新功能 SHALL 与现有用户认证系统集成
2. WHEN 获取学生信息 THEN 系统 SHALL 从现有数据库中读取学生基本信息和班级关系
3. WHEN 权限验证 THEN 系统 SHALL 复用现有的角色权限管理机制
4. WHEN 数据同步 THEN 系统 SHALL 保持与现有系统的数据一致性
5. IF 需要扩展功能 THEN 系统架构 SHALL 支持第二期心理咨询和危机干预功能的添加